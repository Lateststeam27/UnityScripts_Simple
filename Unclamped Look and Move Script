using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class TutorialLook : MonoBehaviour
{

    [Header("Object Controlled")]
    public Transform Camera;
    [Space]


    [Header("Object Look Controlls")]
    public float LookSensitivity = 30f;
    [Space]

    [Header("Camera Look Variables")]
    float xSmooth, ySmooth, zSmooth;
    float axisY, axisX, axisZ;
    float xVelocity, yVelocity;
    [Space]


    [Header("Object Move Controlls")]
    public float MoveSensitivity = 1000f;
    public float MoveSpeed = 10f;
    private float MoveForward, MoveRight, MoveUp;

    public float RollSensitivity = 0.5f;
    public float RollSpeed = 0.5f;
    [Space]


     
    Transform thisTransform;
    Rigidbody thisRigidbody;


    void Awake()
    {
        thisTransform = transform;

        thisRigidbody = GetComponent<Rigidbody>();
        thisRigidbody.constraints = RigidbodyConstraints.FreezeRotation;
        thisRigidbody.useGravity = false;

        Cursor.visible = false;
        Cursor.lockState = CursorLockMode.Locked;
    }


    void FixedUpdate()
    {
        Look();
        Movement();
    }

    void Look()
    {
        Camera.rotation = Quaternion.Slerp(Camera.rotation, thisTransform.rotation, Time.deltaTime * 4.0f);
        Camera.position = thisTransform.position;

        axisX = Input.GetAxisRaw("Mouse X") * 0.075f * LookSensitivity;
        axisY = Input.GetAxisRaw("Mouse Y") * -0.075f * LookSensitivity;
        axisZ = Input.GetAxis("Roll") * RollSensitivity;

        axisX = Mathf.Clamp(axisX, -18.0f, 18.0f);
        axisY = Mathf.Clamp(axisY, -18.0f, 18.0f);
        axisZ = Mathf.Clamp(axisZ, -30.0f, 30.0f);

        xSmooth = Mathf.SmoothDamp(xSmooth, axisX, ref xVelocity, 0.1f);
        ySmooth = Mathf.SmoothDamp(ySmooth, axisY, ref yVelocity, 0.1f);
        zSmooth = Mathf.Lerp(zSmooth, axisZ, Time.smoothDeltaTime * RollSpeed);

        thisTransform.Rotate(ySmooth, xSmooth, zSmooth);
    }


    void Movement()
    {
        //Need to Have Input Axis added into Unity Inputs
        MoveForward = Input.GetAxis("Forward") * MoveSpeed * MoveSensitivity;
        MoveRight = Input.GetAxis("Right") * -MoveSpeed * MoveSensitivity;
        MoveUp = Input.GetAxis("Up") * MoveSpeed * MoveSensitivity;

        Vector3 Moving = Vector3.forward * MoveForward + Vector3.right * MoveRight + Vector3.up * MoveUp;
        thisRigidbody.AddRelativeForce(Moving * Time.smoothDeltaTime);

    }   
}
